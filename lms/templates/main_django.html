<!DOCTYPE html>
{% load sekizai_tags i18n configuration theme_pipeline optional_include staticfiles %}
{% load url from future %}
<html lang="{{LANGUAGE_CODE}}">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{{ platform_name }}{% endblock %}</title>

    <link rel="icon" type="image/x-icon" href="{% favicon_path %}"/>

    {% with "js/i18n/"|add:LANGUAGE_CODE|add:"/djangojs.js" as i18njs_path %}
    <script type="text/javascript" src="{% static i18njs_path %}"></script>
    {% endwith %}

    {% stylesheet 'style-vendor' %}
    {% stylesheet 'style-main-v1' %}

    {% block main_vendor_js %}
    {% javascript 'main_vendor' %}
    {% endblock %}
    {% block headextra %}{% endblock %}
    {% render_block "css" %}

    {% optional_include "head-extra.html"|microsite_template_path %}

    <meta name="path_prefix" content="{{EDX_ROOT_URL}}">
</head>

<body class="{% block bodyclass %}{% endblock %} lang_{{LANGUAGE_CODE}}">
<div class="window-wrap" dir="{{LANGUAGE_BIDI|yesno:'rtl,ltr'}}">
    <a class="nav-skip" href="#main">{% trans "Skip to main content" %}</a>
    {% with course=request.course %}
    {% include "header.html"|microsite_template_path with online_help_token=online_help_token %}
    {% endwith %}
    <div class="content-wrapper" id="content">
        {% block body %}{% endblock %}
        {% block bodyextra %}{% endblock %}
    </div>
    {% with course=request.course %}
    {% include "footer.html"|microsite_template_path %}
    {% endwith %}

</div>

{% javascript 'base_application' %}

{% render_block "js" %}
</body>

<!-- ActiveCampaign -->
<script type="text/javascript">
    // Set to false if opt-in required
    var trackByDefault = false;

    function acEnableTracking() {
        var expiration = new Date(new Date().getTime() + 1000 * 60 * 60 * 24 * 30);
        document.cookie = "ac_enable_tracking=1; expires= " + expiration + "; path=/";
        acTrackVisit();
    }

    function acTrackVisit() {
        var trackcmp_email = '';
        var trackcmp = document.createElement("script");
        trackcmp.async = true;
        trackcmp.type = 'text/javascript';
        trackcmp.src = '//trackcmp.net/visit?actid=609695526&e=' + encodeURIComponent(trackcmp_email) + '&r=' + encodeURIComponent(document.referrer) + '&u=' + encodeURIComponent(window.location.href);
        var trackcmp_s = document.getElementsByTagName("script");
        if (trackcmp_s.length) {
            trackcmp_s[0].parentNode.appendChild(trackcmp);
        } else {
            var trackcmp_h = document.getElementsByTagName("head");
            trackcmp_h.length && trackcmp_h[0].appendChild(trackcmp);
        }
    }

    if (trackByDefault || /(^|; )ac_enable_tracking=([^;]+)/.test(document.cookie)) {
        acEnableTracking();
    }
</script>

</html>

{% comment %}
This is a django template version of our main page from which all
other pages inherit. This file should be rewritten to reflect any
changes in main.html! Files used by {% include %} can be written
as mako templates.

Inheriting from this file allows us to include apps that use the
django templating system without rewriting all of their views in
mako.
{% endcomment %}
